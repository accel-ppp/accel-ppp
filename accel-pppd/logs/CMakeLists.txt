IF(NOT DEFINED LOG_FILE)
	SET(LOG_FILE TRUE)
ENDIF(NOT DEFINED LOG_FILE)

IF(NOT DEFINED LOG_TCP)
	SET(LOG_TCP TRUE)
ENDIF(NOT DEFINED LOG_TCP)

IF(NOT DEFINED LOG_SYSLOG)
	SET(LOG_SYSLOG TRUE)
ENDIF(NOT DEFINED LOG_SYSLOG)


IF(LOG_FILE)
	ADD_LIBRARY(log_file SHARED log_file.c)
	TARGET_LINK_LIBRARIES(log_file rt)
	INSTALL(TARGETS log_file
		LIBRARY DESTINATION ${ACCELPPP_INSTALL_LIBDIR}
	)
ENDIF(LOG_FILE)

IF(LOG_TCP)
	ADD_LIBRARY(log_tcp SHARED log_tcp.c)
	INSTALL(TARGETS log_tcp
		LIBRARY DESTINATION ${ACCELPPP_INSTALL_LIBDIR}
	)
ENDIF(LOG_TCP)

IF(LOG_SYSLOG)
	ADD_LIBRARY(log_syslog SHARED log_syslog.c)
	INSTALL(TARGETS log_syslog
		LIBRARY DESTINATION ${ACCELPPP_INSTALL_LIBDIR}
	)
ENDIF(LOG_SYSLOG)

IF(LOG_PGSQL)
	find_library(PGSQL_LIBRARY pq
					HINTS ${CMAKE_SOURCE_DIR}/lib/linux/gcc/${BIT}/lib
					PATHS ${CMAKE_SOURCE_DIR}/lib/linux/gcc/${BIT}/lib
	)
	IF(NOT PGSQL_LIBRARY)
					message(FATAL_ERROR "${Esc}[31mRequired libpq not found.\n Install libpq-dev and run cmake again${Esc}[m")
	ENDIF(NOT PGSQL_LIBRARY)

	ADD_LIBRARY(log_pgsql SHARED log_pgsql.c)
	TARGET_LINK_LIBRARIES(log_pgsql ${PGSQL_LIBRARY})
	INSTALL(TARGETS log_pgsql
		LIBRARY DESTINATION ${ACCELPPP_INSTALL_LIBDIR}
	)
ENDIF(LOG_PGSQL)

